#!/usr/bin/env ruby
# rubocop:disable FileName

if ENV['GITHOOKS_DEV']
  require 'pathname'
  path = Pathname.new(__FILE__).dirname
  $:.unshift(
    if path.to_s.end_with? '.git/hooks'
      path.parent.parent
    else
      path.parent
    end.join('lib').realpath.to_s
  )
end
require 'githooks'

begin
  GitHooks::Runner.run(
    'args' => ARGV,
    'hook' => ENV['GITHOOKS_HOOK']
  )
rescue GitHooks::Error => e
  puts e.message
  exit 1
end
exit 0
